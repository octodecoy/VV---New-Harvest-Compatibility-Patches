<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <Operation Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef/killedLeavings/DankPyon_RawWood</xpath>
        <!-- Lumber Chain ON -->
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/MedievalOverhaul.SeperateWoodList[defName="LogList"]/blackListWood</xpath>
                    <value>
                        <li>VV_CedarWood</li>
                        <li>VV_EbonyWood</li>
                        <li>VV_MahoganyWood</li>
                        <li>VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="VV_CedarWood"]</xpath>
                    <value>
                        <ThingDef ParentName="VV_MO_PlankBase">
                            <defName>VV_CedarWood</defName>
                            <label>cedar wood planks</label>
                            <description>Fragrant, lightweight processed wood from the cedar tree. Naturally resistant to decay and insects, it is favored for storage chests, roofing, and construction requiring durability without excess weight.</description>
                            <graphicData>
                                <texPath>Things/Item/Resource/WoodPlank</texPath>
                                <graphicClass>Graphic_StackCount</graphicClass>
                                <color>(201,151,112)</color>
                            </graphicData>
                            <statBases>
                                <MarketValue>1.8</MarketValue>
                                <MaxHitPoints>200</MaxHitPoints>
                                <Mass>0.38</Mass>
                                <Flammability>1.0</Flammability>
                                <DeteriorationRate>0.1</DeteriorationRate>
                                <StuffPower_Armor_Sharp>0.52</StuffPower_Armor_Sharp>
                                <StuffPower_Armor_Blunt>0.5</StuffPower_Armor_Blunt>
                                <StuffPower_Armor_Heat>0.4</StuffPower_Armor_Heat>
                                <StuffPower_Insulation_Cold>7</StuffPower_Insulation_Cold>
                                <StuffPower_Insulation_Heat>3</StuffPower_Insulation_Heat>
                                <SharpDamageMultiplier>0.5</SharpDamageMultiplier>
                                <BluntDamageMultiplier>0.8</BluntDamageMultiplier>
                            </statBases>
                            <stuffProps>
                                <stuffAdjective>cedar</stuffAdjective>
                                <commonality>0.50</commonality>
                                <color>(201,151,112)</color>
                                <statFactors>
                                    <MaxHitPoints>0.8</MaxHitPoints>
                                    <Beauty>1.8</Beauty>
                                    <Flammability>1</Flammability>
                                    <WorkToMake>1.0</WorkToMake>
                                    <WorkToBuild>1.0</WorkToBuild>
                                    <DoorOpenSpeed>1.05</DoorOpenSpeed>
                                </statFactors>
                            </stuffProps>
                        </ThingDef>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="VV_EbonyWood"]</xpath>
                    <value>
                        <ThingDef ParentName="VV_MO_PlankBase">
                            <defName>VV_EbonyWood</defName>
                            <label>cedar wood planks</label>
                            <description>Dense and dark processed wood from the ebony tree. Extremely durable and sought after for high-end furniture, construction and tools. Though heavier and harder to work with, its beauty and strength are unmatched.</description>
                            <graphicData>
                                <color>(40,40,42)</color>
                            </graphicData>
                            <statBases>
                                <MarketValue>2.8</MarketValue>
                                <MaxHitPoints>230</MaxHitPoints>
                                <Mass>0.55</Mass>
                                <Flammability>1.0</Flammability>
                                <DeteriorationRate>0.3</DeteriorationRate>
                                <StuffPower_Armor_Sharp>0.65</StuffPower_Armor_Sharp>
                                <StuffPower_Armor_Blunt>0.60</StuffPower_Armor_Blunt>
                                <StuffPower_Armor_Heat>0.45</StuffPower_Armor_Heat>
                                <StuffPower_Insulation_Cold>9</StuffPower_Insulation_Cold>
                                <StuffPower_Insulation_Heat>5</StuffPower_Insulation_Heat>
                                <SharpDamageMultiplier>0.45</SharpDamageMultiplier>
                                <BluntDamageMultiplier>0.95</BluntDamageMultiplier>
                            </statBases>
                            <stuffProps>
                                <stuffAdjective>ebony</stuffAdjective>
                                <commonality>0.20</commonality>
                                <color>(40,40,42)</color>
                                <statFactors>
                                    <MaxHitPoints>0.85</MaxHitPoints>
                                    <Beauty>2.6</Beauty>
                                    <Flammability>1</Flammability>
                                    <WorkToMake>1.2</WorkToMake>
                                    <WorkToBuild>1.2</WorkToBuild>
                                    <DoorOpenSpeed>0.9</DoorOpenSpeed>
                                </statFactors>
                            </stuffProps>
                        </ThingDef>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="VV_MahoganyWood"]</xpath>
                    <value>
                        <ThingDef ParentName="VV_MO_PlankBase">
                            <defName>VV_MahoganyWood</defName>
                            <label>mahogany wood planks</label>
                            <description>Richly colored and smooth processed wood from the mahogany tree. Though lighter than ebony, it is highly valued for its balance between beauty, strength, and workability, making it ideal for furniture and decorative construction.</description>
                            <graphicData>
                                <color>(92,31,31)</color>
                            </graphicData>
                            <statBases>
                                <MarketValue>2.1</MarketValue>
                                <MaxHitPoints>210</MaxHitPoints>
                                <Mass>0.48</Mass>
                                <Flammability>1.0</Flammability>
                                <DeteriorationRate>0.3</DeteriorationRate>
                                <StuffPower_Armor_Sharp>0.58</StuffPower_Armor_Sharp>
                                <StuffPower_Armor_Blunt>0.55</StuffPower_Armor_Blunt>
                                <StuffPower_Armor_Heat>0.42</StuffPower_Armor_Heat>
                                <StuffPower_Insulation_Cold>8</StuffPower_Insulation_Cold>
                                <StuffPower_Insulation_Heat>4</StuffPower_Insulation_Heat>
                                <SharpDamageMultiplier>0.5</SharpDamageMultiplier>
                                <BluntDamageMultiplier>0.9</BluntDamageMultiplier>
                            </statBases>
                            <stuffProps>
                                <stuffAdjective>mahogany</stuffAdjective>
                                <commonality>0.30</commonality>
                                <color>(92,31,31)</color>
                                <statFactors>
                                    <MaxHitPoints>0.9</MaxHitPoints>
                                    <Beauty>2.3</Beauty>
                                    <Flammability>1</Flammability>
                                    <WorkToMake>1.1</WorkToMake>
                                    <WorkToBuild>1.1</WorkToBuild>
                                    <DoorOpenSpeed>0.95</DoorOpenSpeed>
                                </statFactors>
                            </stuffProps>
                        </ThingDef>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="VV_RosewoodWood"]</xpath>
                    <value>
                        <ThingDef ParentName="VV_MO_PlankBase">
                            <defName>VV_RosewoodWood</defName>
                            <label>rosewood wood planks</label>
                            <description>Elegant and richly colored processed wood from the rosewood tree. Renowned for its deep red to purple hue, it is highly sought after for crafting high-end furniture and decorative items.</description>
                            <graphicData>
                                <color>(119,13,60)</color>
                            </graphicData>
                            <statBases>
                                <MarketValue>2.5</MarketValue>
                                <MaxHitPoints>250</MaxHitPoints>
                                <Mass>0.45</Mass>
                                <Flammability>1.0</Flammability>
                                <DeteriorationRate>0.2</DeteriorationRate>
                                <StuffPower_Armor_Sharp>0.65</StuffPower_Armor_Sharp>
                                <StuffPower_Armor_Blunt>0.6</StuffPower_Armor_Blunt>
                                <StuffPower_Armor_Heat>0.5</StuffPower_Armor_Heat>
                                <StuffPower_Insulation_Cold>10</StuffPower_Insulation_Cold>
                                <StuffPower_Insulation_Heat>5</StuffPower_Insulation_Heat>
                                <SharpDamageMultiplier>0.6</SharpDamageMultiplier>
                                <BluntDamageMultiplier>0.85</BluntDamageMultiplier>
                            </statBases>
                            <stuffProps>
                                <stuffAdjective>rosewood</stuffAdjective>
                                <commonality>0.40</commonality>
                                <color>(119,13,60)</color>
                                <statFactors>
                                    <MaxHitPoints>0.85</MaxHitPoints>
                                    <Beauty>2.5</Beauty>
                                    <Flammability>1</Flammability>
                                    <WorkToMake>1.2</WorkToMake>
                                    <WorkToBuild>1.2</WorkToBuild>
                                    <DoorOpenSpeed>0.9</DoorOpenSpeed>
                                </statFactors>
                            </stuffProps>
                        </ThingDef>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/MedievalOverhaul.SeperateWoodList[defName="LogList"]/plankDict</xpath>
                    <value>
                        <li>
                            <key>VV_CedarWood</key>
                            <value>DankPyon_Log_VV_CedarWood</value>
                        </li>
                        <li>
                            <key>VV_EbonyWood</key>
                            <value>DankPyon_Log_VV_EbonyWood</value>
                        </li>
                        <li>
                            <key>VV_MahoganyWood</key>
                            <value>DankPyon_Log_VV_MahoganyWood</value>
                        </li>
                        <li>
                            <key>VV_RosewoodWood</key>
                            <value>DankPyon_Log_VV_RosewoodWood</value>
                        </li>
                    </value>
                </li>
                <!-- STORAGE -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_BarrelWoodLog"]
                        /building/fixedStorageSettings/filter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_BarrelWoodLog"]
                        /building/defaultStorageSettings/filter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <!-- RECIPES - DISALLOWED -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef/ingredients/li/filter
                        /disallowedThingDefs
                        [li="WoodLog"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef
                        [ingredients/li/filter/disallowedThingDefs/li="DankPyon_Log_VV_CedarWood"]
                        /fixedIngredientFilter/disallowedThingDefs
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <!-- RECIPES - ALLOWED -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef
                        [defName="DankPyon_Make_Tar" or defName="DankPyon_Make_TarBulk"]
                        /ingredients/li/filter/thingDefs
                        [li="WoodLog"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef
                        [defName="DankPyon_Make_Tar"]
                        /fixedIngredientFilter/thingDefs
                        [li="WoodLog"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef
                        [defName="DankPyon_Make_TimberAny_Tribal"]
                        /ingredients/li/filter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/RecipeDef
                        [defName="DankPyon_Make_TimberAny_Tribal"]
                        /fixedIngredientFilter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="DankPyon_Log_VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <!-- HIDEOUT (Outposts) -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_HideoutWoodLogs1x1c" or
                        defName="DankPyon_HideoutWoodLogs1x2c" or
                        defName="DankPyon_HideoutWoodLogs2x2c"]
                        /modExtensions/li
                        [@Class="MedievalOverhaul.BuildingLootableExtension"]
                        /randomItems
                    </xpath>
                    <value>
                        <li>DankPyon_Log_VV_CedarWood</li>
                        <li>DankPyon_Log_VV_EbonyWood</li>
                        <li>DankPyon_Log_VV_MahoganyWood</li>
                        <li>DankPyon_Log_VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_HideoutTimber1x1c" or
                        defName="DankPyon_HideoutTimber1x2c" or
                        defName="DankPyon_HideoutTimber2x2c"]
                        /modExtensions/li
                        [@Class="MedievalOverhaul.BuildingLootableExtension"]
                        /randomItems
                    </xpath>
                    <value>
                        <li>VV_CedarWood</li>
                        <li>VV_EbonyWood</li>
                        <li>VV_MahoganyWood</li>
                        <li>VV_RosewoodWood</li>
                    </value>
                </li>
            </operations>
        </match>
        <!-- Lumber Chain OFF -->
        <nomatch Class="PatchOperationSequence">
            <operations>
                <!-- CATEGORY -->
                <li Class="PatchOperationReplace">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef[defName="VV_EbonyWood" or defName="VV_MahoganyWood" or defName="VV_RosewoodWood" or defName="VV_CedarWood"]/thingCategories
                        [not(li="DankPyon_Wood")]
                        /li[text()="ResourcesRaw"]/text()
                    </xpath>
                    <value>DankPyon_Wood</value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef[defName="VV_EbonyWood" or defName="VV_MahoganyWood" or defName="VV_RosewoodWood" or defName="VV_CedarWood"]/thingCategories
                        [not(li="DankPyon_Wood")]
                    </xpath>
                    <value>
                        <li>DankPyon_Wood</li>
                    </value>
                </li>
                <!-- Hide logs, they aren't needed when Lumber Chain is off. -->
                <li Class="PatchOperationReplace">
                    <success>Always</success>
                    <xpath>/Defs/ThingDef[@Name="VV_MO_LogBase"]/stuffProps/categories</xpath>
                    <value>
                        <categories />
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <success>Always</success>
                    <xpath>/Defs/ThingDef[@Name="VV_MO_LogBase"]/thingCategories</xpath>
                    <value>
                        <thingCategories />
                    </value>
                </li>
                <!-- STORAGE -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_BarrelWoodLog"]
                        /building/fixedStorageSettings/filter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>VV_CedarWood</li>
                        <li>VV_EbonyWood</li>
                        <li>VV_MahoganyWood</li>
                        <li>VV_RosewoodWood</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_BarrelWoodLog"]
                        /building/defaultStorageSettings/filter/thingDefs
                        [li="DankPyon_RawWood"]
                        [not(li="VV_CedarWood")]
                    </xpath>
                    <value>
                        <li>VV_CedarWood</li>
                        <li>VV_EbonyWood</li>
                        <li>VV_MahoganyWood</li>
                        <li>VV_RosewoodWood</li>
                    </value>
                </li>
                <!-- HIDEOUT (Outposts) -->
                <li Class="PatchOperationAdd">
                    <success>Always</success>
                    <xpath>                        
                        /Defs/ThingDef
                        [defName="DankPyon_HideoutTimber1x1c" or
                        defName="DankPyon_HideoutTimber1x2c" or
                        defName="DankPyon_HideoutTimber2x2c" or
                        defName="DankPyon_HideoutWoodLogs1x1c" or
                        defName="DankPyon_HideoutWoodLogs1x2c" or
                        defName="DankPyon_HideoutWoodLogs2x2c"]
                        /modExtensions/li
                        [@Class="MedievalOverhaul.BuildingLootableExtension"]
                        /randomItems
                    </xpath>
                    <value>
                        <li>VV_CedarWood</li>
                        <li>VV_EbonyWood</li>
                        <li>VV_MahoganyWood</li>
                        <li>VV_RosewoodWood</li>
                    </value>
                </li>
            </operations>
        </nomatch>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>            
            /Defs/RecipeDef
            [defName="DankPyon_Make_Tar" or defName="DankPyon_Make_TarBulk"]
            /ingredients/li/filter/thingDefs
            [li="WoodLog"]
            [not(li="VV_CedarWood")]
        </xpath>
        <value>
            <li>VV_CedarWood</li>
            <li>VV_EbonyWood</li>
            <li>VV_MahoganyWood</li>
            <li>VV_RosewoodWood</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>            
            /Defs/RecipeDef
            [defName="DankPyon_Make_Tar"]
            /fixedIngredientFilter/thingDefs
            [li="WoodLog"]
            [not(li="VV_CedarWood")]
        </xpath>
        <value>
            <li>VV_CedarWood</li>
            <li>VV_EbonyWood</li>
            <li>VV_MahoganyWood</li>
            <li>VV_RosewoodWood</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>            
            /Defs/RecipeDef
            [defName="DankPyon_MakeBullet_ScorpioBolt" or
            defName="DankPyon_MakeBullet_ScorpioBoltBulk" or
            defName="DankPyon_MakeBullet_BallistaBolt" or
            defName="DankPyon_MakeBullet_BallistaBoltBulk"]
            /ingredients/li/filter/thingDefs
            [li="WoodLog"]
            [not(li="VV_CedarWood")]
        </xpath>
        <value>
            <li>VV_CedarWood</li>
            <li>VV_EbonyWood</li>
            <li>VV_MahoganyWood</li>
            <li>VV_RosewoodWood</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>            
            /Defs/RecipeDef
            [defName="DankPyon_MakeBullet_ScorpioBolt" or
            defName="DankPyon_MakeBullet_ScorpioBoltBulk" or
            defName="DankPyon_MakeBullet_BallistaBolt" or
            defName="DankPyon_MakeBullet_BallistaBoltBulk"]
            /fixedIngredientFilter/thingDefs
            [li="WoodLog"]
            [not(li="VV_CedarWood")]
        </xpath>
        <value>
            <li>VV_CedarWood</li>
            <li>VV_EbonyWood</li>
            <li>VV_MahoganyWood</li>
            <li>VV_RosewoodWood</li>
        </value>
    </Operation>
</Patch>