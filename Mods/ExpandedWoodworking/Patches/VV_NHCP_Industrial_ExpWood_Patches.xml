<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <!-- LOGS -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="VV_CedarWood"]</xpath>
        <value>
            <ThingDef ParentName="WoodLogBase">
                <defName>VV_CedarWood</defName>
                <label>cedar logs</label>
                <description>Raw wood from a cedar tree. When processed it becomes useful for building structures, weapons, and even simple prosthetics. Cedar is a durable softwood.</description>
                <graphicData>
                    <texPath>Things/Items/Resources/EW/VV_NHCP_CedarWood</texPath>
                </graphicData>
                <statBases>
                    <Mass>0.45</Mass>
                    <MarketValue>1.8</MarketValue>
                    <DeteriorationRate>2</DeteriorationRate>
                </statBases>
                <stuffProps>
                    <stuffAdjective>cedar</stuffAdjective>
                    <commonality>0.01</commonality>
                    <color>(201,151,112)</color>
                    <statFactors>
                        <MaxHitPoints>0.35</MaxHitPoints>
                        <Beauty>2.0</Beauty>
                        <WorkToMake>0.3</WorkToMake>
                        <WorkToBuild>0.3</WorkToBuild>
                        <DoorOpenSpeed>1.25</DoorOpenSpeed>
                    </statFactors>
                </stuffProps>
                <butcherProducts>
                    <VV_CedarLumber>30</VV_CedarLumber>
                </butcherProducts>
            </ThingDef>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="VV_EbonyWood"]</xpath>
        <value>
            <ThingDef ParentName="WoodLogBase">
                <defName>VV_EbonyWood</defName>
                <label>ebony logs</label>
                <description>Raw wood from a ebony tree. When processed it becomes useful for building structures, weapons, and even simple prosthetics. Ebony is among the most durable hardwoods.</description>
                <graphicData>
                    <texPath>Things/Items/Resources/EW/VV_NHCP_EbonyWood</texPath>
                </graphicData>
                <statBases>
                    <Mass>0.65</Mass>
                    <MarketValue>1.5</MarketValue>
                    <DeteriorationRate>0.5</DeteriorationRate>
                </statBases>
                <stuffProps>
                    <stuffAdjective>ebony</stuffAdjective>
                    <commonality>0.01</commonality>
                    <color>(40,40,42)</color>
                    <statFactors>
                        <MaxHitPoints>0.75</MaxHitPoints>
                        <Beauty>2.8</Beauty>
                        <WorkToMake>0.6</WorkToMake>
                        <WorkToBuild>0.6</WorkToBuild>
                        <DoorOpenSpeed>1.0</DoorOpenSpeed>
                    </statFactors>
                </stuffProps>
                <butcherProducts>
                    <VV_EbonyLumber>30</VV_EbonyLumber>
                </butcherProducts>
            </ThingDef>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="VV_MahoganyWood"]</xpath>
        <value>
            <ThingDef ParentName="WoodLogBase">
                <defName>VV_MahoganyWood</defName>
                <label>mahogany logs</label>
                <description>Raw wood from a mahogany tree. When processed it becomes useful for building structures, weapons, and even simple prosthetics. Mahogany is a very durable hardwood.</description>
                <graphicData>
                    <texPath>Things/Items/Resources/EW/VV_NHCP_MahoganyWood</texPath>
                </graphicData>
                <statBases>
                    <Mass>0.6</Mass>
                    <MarketValue>1.6</MarketValue>
                    <DeteriorationRate>0.75</DeteriorationRate>
                </statBases>
                <stuffProps>
                    <stuffAdjective>mahogany</stuffAdjective>
                    <commonality>0.01</commonality>
                    <color>(92,31,31)</color>
                    <statFactors>
                        <MaxHitPoints>0.5</MaxHitPoints>
                        <Beauty>2.8</Beauty>
                        <WorkToMake>0.5</WorkToMake>
                        <WorkToBuild>0.5</WorkToBuild>
                        <DoorOpenSpeed>1.1</DoorOpenSpeed>
                    </statFactors>
                </stuffProps>
                <butcherProducts>
                    <VV_MahoganyLumber>30</VV_MahoganyLumber>
                </butcherProducts>
            </ThingDef>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="VV_RosewoodWood"]</xpath>
        <value>
            <ThingDef ParentName="WoodLogBase">
                <defName>VV_RosewoodWood</defName>
                <label>rosewood logs</label>
                <description>Raw wood from a rosewood tree. When processed it becomes useful for building structures, weapons, and even simple prosthetics. Rosewood is a durable hardwood.</description>
                <graphicData>
                    <texPath>Things/Items/Resources/EW/VV_NHCP_RosewoodWood</texPath>
                </graphicData>
                <statBases>
                    <Mass>0.6</Mass>
                    <MarketValue>1.8</MarketValue>
                    <DeteriorationRate>1.5</DeteriorationRate>
                </statBases>
                <stuffProps>
                    <stuffAdjective>rosewood</stuffAdjective>
                    <commonality>0.01</commonality>
                    <color>(119,13,60)</color>
                    <statFactors>
                        <MaxHitPoints>0.4</MaxHitPoints>
                        <Beauty>3.2</Beauty>
                        <WorkToMake>0.4</WorkToMake>
                        <WorkToBuild>0.4</WorkToBuild>
                        <DoorOpenSpeed>1.1</DoorOpenSpeed>
                    </statFactors>
                </stuffProps>
                <butcherProducts>
                    <VV_RosewoodLumber>30</VV_RosewoodLumber>
                </butcherProducts>
            </ThingDef>
        </value>
    </Operation>
    <!-- Replace all floor costsLists that use logs with lumber. -->
    <Operation Class="PatchOperationSetName">
        <success>Always</success>
        <xpath>/Defs/TerrainDef/costList/VV_CedarWood</xpath>
        <name>VV_CedarLumber</name>
    </Operation>
    <Operation Class="PatchOperationSetName">
        <success>Always</success>
        <xpath>/Defs/TerrainDef/costList/VV_EbonyWood</xpath>
        <name>VV_EbonyLumber</name>
    </Operation>
    <Operation Class="PatchOperationSetName">
        <success>Always</success>
        <xpath>/Defs/TerrainDef/costList/VV_MahoganyWood</xpath>
        <name>VV_MahoganyLumber</name>
    </Operation>
    <Operation Class="PatchOperationSetName">
        <success>Always</success>
        <xpath>/Defs/TerrainDef/costList/VV_RosewoodWood</xpath>
        <name>VV_RosewoodLumber</name>
    </Operation>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Medieval Overhaul</li>
        </mods>
        <!-- If true, MO's lumber chain is ON - we only care about off. -->
        <match Class="PatchOperationConditional">
            <xpath>/Defs/ThingDef/killedLeavings/DankPyon_RawWood</xpath>
            <nomatch Class="PatchOperationSequence">
                <operations>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/ThingDef/comps/li
                            [@Class="CompProperties_Refuelable"]
                            /fuelFilter/categories
                            [not(li="WoodTypes")]
                            [li="DankPyon_Wood" or li="DankPyon_RawWood"]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            Defs/ThingDef/comps/li
                            [@Class="CompProperties_Refuelable"]
                            /fuelFilter
                            [not(categories[li="WoodTypes"])]
                            /thingDefs[li="WoodLog" or li="DankPyon_Coal"]
                        </xpath>
                        <value>
                            <li>VV_CedarWood</li>
                            <li>VV_EbonyWood</li>
                            <li>VV_MahoganyWood</li>
                            <li>VV_RosewoodWood</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/ThingDef
                            [defName="DankPyon_Timber1x1c" or
                            defName="DankPyon_Timber1x2c" or
                            defName="DankPyon_Timber2x2c"]
                            /building/fixedStorageSettings/filter/categories
                            [not(li="WoodLumber")]
                        </xpath>
                        <value>
                            <li>WoodLumber</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/ThingDef
                            [defName="DankPyon_WoodLogs1x1c" or
                            defName="DankPyon_WoodLogs1x2c" or
                            defName="DankPyon_WoodLogs2x2c"]
                            /building/fixedStorageSettings/filter/categories
                            [not(li="WoodTypes")]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="DankPyon_BarrelWoodLog"]/building/fixedStorageSettings/filter</xpath>
                        <value>
                            <categories>
                                <li>WoodTypes</li>
                            </categories>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="DankPyon_BarrelWoodLog"]/building/defaultStorageSettings/filter</xpath>
                        <value>
                            <categories>
                                <li>WoodTypes</li>
                            </categories>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/ProcessorFramework.ProcessDef
                            [defName="DankPyon_WoodIntoCoal"]
                            /ingredientFilter/categories
                            [not(li="WoodTypes")]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [defName="DankPyon_Make_Tar" or defName="DankPyon_Make_TarBulk"]
                            /ingredients/li/filter
                            [thingDefs/li="WoodLog"]
                            [not(categories)]
                        </xpath>
                        <value>
                            <categories>
                                <li>WoodTypes</li>
                            </categories>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [defName="DankPyon_Make_Tar"]
                            /fixedIngredientFilter
                            [thingDefs/li="WoodLog"]
                            [not(categories)]
                        </xpath>
                        <value>
                            <categories>
                                <li>WoodTypes</li>
                            </categories>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [defName="DankPyon_Make_TarBulk"]
                            [not(fixedIngredientFilter)]
                            [ingredients/li/filter/categories/li="WoodTypes"]
                        </xpath>
                        <value>
                            <fixedIngredientFilter>
                                <categories>
                                    <li>WoodTypes</li>
                                </categories>
                            </fixedIngredientFilter>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef/ingredients/li/filter/categories
                            [li="DankPyon_Wood"]
                            [not(li="WoodLumber")]
                        </xpath>
                        <value>
                            <li>WoodLumber</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [ingredients/li/filter/categories/li="WoodLumber"]
                            /fixedIngredientFilter/categories
                            [not(li="WoodLumber")]
                        </xpath>
                        <value>
                            <li>WoodLumber</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [fixedIngredientFilter/categories/li="WoodLumber"]
                            /defaultIngredientFilter/categories
                            [not(li="WoodLumber")]
                        </xpath>
                        <value>
                            <li>WoodLumber</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef/ingredients/li/filter/categories
                            [li="DankPyon_Wood" or li="DankPyon_RawWood"]
                            [not(li="WoodTypes")]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [ingredients/li/filter/categories/li="WoodTypes"]
                            /fixedIngredientFilter/categories
                            [not(li="WoodTypes")]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                    <li Class="PatchOperationAdd">
                        <success>Always</success>
                        <xpath>                            
                            /Defs/RecipeDef
                            [fixedIngredientFilter/categories/li="WoodTypes"]
                            /defaultIngredientFilter/categories
                            [not(li="WoodTypes")]
                        </xpath>
                        <value>
                            <li>WoodTypes</li>
                        </value>
                    </li>
                </operations>
            </nomatch>
        </match>
    </Operation>
</Patch>